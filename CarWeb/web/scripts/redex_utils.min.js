var DataSourceTree=function(a){this._data=a.data;this._delay=a.delay};DataSourceTree.prototype.data=function(c,d){var a=this;var b=null;if(!("name" in c)&&!("type" in c)){b=this._data;d({data:b});return}else{if("type" in c&&c.type=="folder"){if("additionalParameters" in c&&"children" in c.additionalParameters){b=c.additionalParameters.children}else{b={}}}}if(b!=null){setTimeout(function(){d({data:b})},parseInt(Math.random()*50)+20)}};function in_array(c,b){if(!b||b.length==0){return false}for(var d=0;d<b.length;d++){if(b[d]==c){return true}}return false}function isRegisterUserName(b){var a=/^[a-zA-Z]{1}([a-zA-Z0-9]|[._]){4,20}$/;return a.exec(b)}function _g_fn_show_setting(){$("#_admin_setting_dialog").show();$("#_global_admin_name").select()}function _g_fn_close_setting(){$("#_admin_setting_dialog").hide()}function _g_fn_save_setting(adminId){if(!$.trim($("#_global_admin_name").val())){$("#_global_admin_name").attr("data-original-title","请输入姓名");$("#_global_admin_name").addClass("tooltip-error").tooltip("show");return}if(!!$("#_global_admin_password").val()){if($("#_global_admin_password").val()!=$("#_global_admin_retype_password").val()){$("#_global_admin_retype_password").attr("data-original-title","密码不匹配");$("#_global_admin_retype_password").addClass("tooltip-error").tooltip("show");return}}var pwd=(!!$("#_global_admin_password").val())?hex_md5($("#_global_admin_password").val()):"";$.ajax({type:"POST",url:"/security/admin!modSelf.action",dataType:"text",data:{"obj.id":adminId,"obj.realname":$.trim($("#_global_admin_name").val()),"obj.password":pwd},success:function(msg){var response=eval("(function(){return "+msg+";})()");if(response.success){$("#_global_href_name").html($.trim($("#_global_admin_name").val()));$("#_admin_setting_dialog").hide()}else{var errorMsg=response.error[0];alert(errorMsg)}}})};